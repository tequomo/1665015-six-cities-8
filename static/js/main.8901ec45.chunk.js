(this["webpackJsonpsix-cities"]=this["webpackJsonpsix-cities"]||[]).push([[0],{54:function(e,t,a){},56:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var r,n,c,s,i=a(1),o=a.n(i),l=a(22),u=a.n(l),d=a(17),j=a(2);!function(e){e.Main="/",e.SignIn="/login",e.SignOut="/logout",e.Favorites="/favorites",e.Room="/offer/:id",e.Offer="/offer/"}(r||(r={})),function(e){e.Auth="AUTH",e.NoAuth="NO_AUTH",e.Unknown="UNKNOWN"}(n||(n={})),function(e){e[e.Ok=200]="Ok",e[e.NoContent=204]="NoContent",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.NotFound=404]="NotFound"}(c||(c={})),function(e){e[e.Terribly=0]="Terribly",e[e.Badly=1]="Badly",e[e["Not bad"]=2]="Not bad",e[e.Good=3]="Good",e[e.Perfect=4]="Perfect"}(s||(s={}));var f,b=["Paris","Cologne","Brussels","Amsterdam","Hamburg","Dusseldorf"];!function(e){e.Default="img/pin.svg",e.Active="img/pin-active.svg"}(f||(f={}));var p;!function(e){e[e.Min=50]="Min",e[e.Max=300]="Max"}(p||(p={}));var O,m,v={CitiesPlaces:{listClassName:"cities__places-list",tabsClassName:"tabs__content",cardClassName:"cities__place-card",wrapperClassName:"cities__image-wrapper",buttonClassName:"place-card__bookmark-button--active"},NearPlaces:{listClassName:"near-places__list",cardClassName:"near-places__card",wrapperClassName:"near-places__image-wrapper"},NoPlaces:{mainClassName:"page__main--index-empty",divClasName:"cities__places-container--empty"},PlacesSort:{listClassName:"places__options--opened",itemClassName:"places__option--active"},HeaderAuth:{spanAuthClassName:"header__user-name user__name",spanNoAuthClassName:"header__login"},CurrentOffer:{buttonFavoriteClassName:"property__bookmark-button--active",divProClassName:"property__avatar-wrapper--pro"},MainScreen:{mainClassName:"page__main--index-empty",divCitiesClassName:"cities__places-container--empty"},FavoritesScreen:{mainClassName:"page__main--favorites-empty"},LocationsTab:{itemClassName:"tabs__item--active"}},h={DEFAULT:"Popular",PRICE_UP:"Price: low to high",PRICE_DOWN:"Price: high to low",TOP_RATED:"Top rated first"};!function(e){e.Hotels="/hotels",e.Login="/login",e.Logout="/logout",e.Nearby="/nearby",e.Favorite="/favorite",e.Reviews="/comments"}(O||(O={})),function(e){e.Idle="idle",e.Loading="loading",e.Succeeded="succeeded",e.Failed="failed"}(m||(m={}));var _,g="Please enter valid email and password",x="Don't forget to sign in",N="You are not logged in",y="Review sending failed",w="Offers loading failed",S=a(7),C=a.n(S),k=a(16),L=a(19),A=a(3);!function(e){e.SelectCity="main/selectCity",e.FilterOffers="main/filterOffers",e.SelectSorting="main/selectSorting",e.LoadOffers="data/loadOffers",e.SetOffersLoadingStatus="data/setOffersLoadingStatus",e.LoadCurrentOffer="data/loadCurrentOffer",e.SetCurrentOfferLoadingStatus="data/setCurrentOfferLoadingStatus",e.LoadOfferReviews="data/loadOfferReviews",e.SetOfferReviewsLoadingStatus="data/setOfferReviewsLoadingStatus",e.SendOfferReview="data/sendOfferReview",e.SetReviewLoadingStatus="data/setReviewLoadingStatus",e.LoadNearbyOffers="data/loadNearbyOffers",e.SetNearbyOffersLoadingStatus="data/setNearbyOffersLoadingStatus",e.LoadFavoriteOffers="data/loadFavoriteOffers",e.SetFavoriteOffersLoadingStatus="data/setFavoriteOffersLoadingStatus",e.ToggleIsFavorite="data/toggleFavorite",e.SetToggleIsFavoriteLoadingStatus="data/setToggleIsFavoriteLoadingStatus",e.RequireAuthorization="user/requireAuthorization",e.ReceiveAuthData="user/receiveAuthData",e.RequireLogout="user/requireLogout",e.RedirectToRoute="main/redirectToRoute",e.UpdateOffer="data/updateOffer"}(_||(_={}));var R,F,T=Object(A.b)(_.SelectCity,(function(e){return{payload:e}})),I=(Object(A.b)(_.FilterOffers,(function(e){return{payload:e}})),Object(A.b)(_.SelectSorting,(function(e){return{payload:e}}))),P=Object(A.b)(_.LoadOffers,(function(e){return{payload:e}})),M=Object(A.b)(_.LoadCurrentOffer,(function(e){return{payload:e}})),D=Object(A.b)(_.LoadOfferReviews,(function(e){return{payload:e}})),E=Object(A.b)(_.SetOffersLoadingStatus,(function(e){return{payload:e}})),U=Object(A.b)(_.SetCurrentOfferLoadingStatus,(function(e){return{payload:e}})),H=Object(A.b)(_.SetOfferReviewsLoadingStatus,(function(e){return{payload:e}})),z=Object(A.b)(_.SetReviewLoadingStatus,(function(e){return{payload:e}})),B=Object(A.b)(_.SetFavoriteOffersLoadingStatus,(function(e){return{payload:e}})),q=Object(A.b)(_.SetToggleIsFavoriteLoadingStatus,(function(e){return{payload:e}})),V=Object(A.b)(_.LoadNearbyOffers,(function(e){return{payload:e}})),W=Object(A.b)(_.SetToggleIsFavoriteLoadingStatus,(function(e){return{payload:e}})),G=Object(A.b)(_.LoadFavoriteOffers,(function(e){return{payload:e}})),Z=(Object(A.b)(_.LoadFavoriteOffers,(function(e){return{payload:e}})),Object(A.b)(_.UpdateOffer,(function(e){return{payload:e}}))),Y=Object(A.b)(_.RequireAuthorization,(function(e){return{payload:e}})),J=Object(A.b)(_.RequireLogout),K=Object(A.b)(_.RedirectToRoute,(function(e){return{payload:e}})),$=Object(A.b)(_.ReceiveAuthData,(function(e){return{payload:e}})),Q=a(20),X=a(42),ee=["avatar_url","is_pro"],te=function(e){return{bedrooms:e.bedrooms,city:e.city,description:e.description,goods:e.goods,host:{avatarUrl:e.host.avatar_url,id:e.host.id,isPro:e.host.is_pro,name:e.host.name},id:e.id,images:e.images,isFavorite:e.is_favorite,isPremium:e.is_premium,location:e.location,maxAdults:e.max_adults,previewImage:e.preview_image,price:e.price,rating:e.rating,title:e.title,type:e.type}},ae=function(e){return e.map((function(e){return te(e)}))},re=function(e){var t=Object(Q.a)(Object(Q.a)({},e),{},{avatarUrl:e.avatar_url,isPro:e.is_pro});t.avatar_url,t.is_pro;return Object(X.a)(t,ee)},ne=function(e){return e.map((function(e){return function(e){return{comment:e.comment,date:e.date,id:e.id,rating:e.rating,user:{avatarUrl:e.user.avatar_url,id:e.user.id,isPro:e.user.is_pro,name:e.user.name}}}(e)}))},ce="six-cities-auth-token",se=function(e,t){return function(){var a=Object(k.a)(C.a.mark((function a(n,c,s){var i,o;return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,s.post("".concat(O.Favorite,"/").concat(e,"/").concat(t));case 3:i=a.sent,o=i.data,n(Z(te(o))),n(q(m.Succeeded)),a.next=14;break;case 9:a.prev=9,a.t0=a.catch(0),n(q(m.Failed)),n(K(r.SignIn)),L.b.warning(N);case 14:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e,t,r){return a.apply(this,arguments)}}()},ie=function(e){return function(){var t=Object(k.a)(C.a.mark((function t(a,r,n){var c,s;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.get("".concat(O.Reviews,"/").concat(e));case 3:c=t.sent,s=c.data,a(D(ne(s))),a(H(m.Succeeded)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a(H(m.Failed));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,a,r){return t.apply(this,arguments)}}()},oe=a(18),le=a(8),ue={authStatus:n.Unknown,authUserData:null},de=Object(A.c)(ue,(function(e){e.addCase(Y,(function(e,t){e.authStatus=t.payload})).addCase($,(function(e,t){e.authUserData=t.payload})).addCase(J,(function(e,t){e.authStatus=n.NoAuth,e.authUserData=null}))})),je=a(13),fe=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},be=function(e){return Math.round(e)/5*100},pe=new Array(5).fill(null).map((function(e,t){return t+1})).sort((function(e,t){return t-e})),Oe=function(e,t){return e.filter((function(e){return e.city.name===t}))},me=function(e,t){return e.slice().sort((function(){return.5-Math.random()})).slice(0,t)},ve=function(e,t){var a=e.findIndex((function(e){return e.id===t.id}));return-1===a?e:[].concat(Object(je.a)(e.slice(0,a)),[t],Object(je.a)(e.slice(a+1)))},he=function(e,t){return!(e>0&&t.length>=p.Min&&t.length<p.Max)},_e={offers:[],offersLoadingStatus:m.Idle},ge=Object(A.c)(_e,(function(e){e.addCase(P,(function(e,t){e.offers=t.payload})).addCase(E,(function(e,t){e.offersLoadingStatus=t.payload})).addCase(Z,(function(e,t){e.offers=ve(e.offers,t.payload)}))})),xe={currentOffer:null,currentOfferLoadingStatus:m.Idle},Ne=Object(A.c)(xe,(function(e){e.addCase(M,(function(e,t){e.currentOffer=t.payload})).addCase(U,(function(e,t){e.currentOfferLoadingStatus=t.payload})).addCase(Z,(function(e,t){var a,r;null!==e.currentOffer&&(e.currentOffer=(a=e.currentOffer,r=t.payload,a.id!==r.id?a:r))}))})),ye={nearbyOffers:[],nearbyOffersLoadingStatus:m.Idle},we=Object(A.c)(ye,(function(e){e.addCase(V,(function(e,t){e.nearbyOffers=t.payload})).addCase(W,(function(e,t){e.nearbyOffersLoadingStatus=t.payload})).addCase(Z,(function(e,t){e.nearbyOffers=ve(e.nearbyOffers,t.payload)}))})),Se={favoriteOffers:[],favoriteOffersLoadingStatus:m.Idle,toggleIsFavoriteLoadingStatus:m.Idle},Ce=Object(A.c)(Se,(function(e){e.addCase(G,(function(e,t){e.favoriteOffers=t.payload})).addCase(B,(function(e,t){e.favoriteOffersLoadingStatus=t.payload})).addCase(Z,(function(e,t){e.favoriteOffers=function(e,t){var a=e.findIndex((function(e){return e.id===t.id}));return-1===a?[].concat(Object(je.a)(e),[t]):[].concat(Object(je.a)(e.slice(0,a)),Object(je.a)(e.slice(a+1)))}(e.favoriteOffers,t.payload)})).addCase(q,(function(e,t){e.toggleIsFavoriteLoadingStatus=t.payload}))})),ke={offerReviews:[],offerReviewsLoadingStatus:m.Idle,reviewLoadingStatus:m.Idle},Le=Object(A.c)(ke,(function(e){e.addCase(D,(function(e,t){e.offerReviews=t.payload})).addCase(H,(function(e,t){e.offerReviewsLoadingStatus=t.payload})).addCase(z,(function(e,t){e.reviewLoadingStatus=t.payload}))})),Ae={selectedCity:"Paris",currentSortingType:h.DEFAULT},Re=Object(A.c)(Ae,(function(e){e.addCase(T,(function(e,t){e.selectedCity=t.payload})).addCase(I,(function(e,t){e.currentSortingType=t.payload}))}));!function(e){e.auth="USER_AUTH",e.offers="OFFERS_DATA",e.currentOffer="CURRENT_OFFER_DATA",e.nearbyOffers="NEARBY_DATA",e.favoriteOffers="FAVORITES_DATA",e.reviews="REVIEWS_DATA",e.state="STATE"}(F||(F={}));var Fe=Object(le.c)((R={},Object(oe.a)(R,F.auth,de),Object(oe.a)(R,F.offers,ge),Object(oe.a)(R,F.nearbyOffers,we),Object(oe.a)(R,F.favoriteOffers,Ce),Object(oe.a)(R,F.currentOffer,Ne),Object(oe.a)(R,F.reviews,Le),Object(oe.a)(R,F.state,Re),R)),Te=function(e){return e[F.state].selectedCity},Ie=function(e){return e[F.state].currentSortingType},Pe=a(15),Me=function(e){return e[F.offers].offersLoadingStatus},De=Object(Pe.a)((function(e){return e[F.offers].offers}),Te,(function(e,t){return Oe(e,t)})),Ee=Object(Pe.a)(Ie,De,(function(e,t){return function(e,t){switch(e){case h.PRICE_UP:return Object(je.a)(t).sort((function(e,t){return e.price-t.price}));case h.PRICE_DOWN:return Object(je.a)(t).sort((function(e,t){return t.price-e.price}));case h.TOP_RATED:return Object(je.a)(t).sort((function(e,t){return t.rating-e.rating}));default:return t}}(e,t)})),Ue=a(6),He=function(e){return e[F.auth].authStatus},ze=function(e){return e[F.auth].authUserData},Be=a(0);var qe=function(e){var t=e.onSignOut;return Object(Be.jsx)("li",{className:"header__nav-item",children:Object(Be.jsx)(Ue.a,{className:"header__nav-link",to:r.SignOut,onClick:t,children:Object(Be.jsx)("span",{className:"header__signout",children:"Sign out"})})})};var Ve=function(){var e=Object(j.c)(He),t=Object(j.c)(ze),a=Object(j.b)(),c=e===n.Auth;return Object(Be.jsx)("nav",{className:"header__nav",children:Object(Be.jsxs)("ul",{className:"header__nav-list",children:[Object(Be.jsx)("li",{className:"header__nav-item user",children:Object(Be.jsxs)(Ue.a,{className:"header__nav-link header__nav-link--profile",to:c?r.Favorites:r.SignIn,children:[Object(Be.jsx)("div",{className:"header__avatar-wrapper user__avatar-wrapper",style:c?{backgroundImage:"url(".concat(null===t||void 0===t?void 0:t.avatarUrl,")"),borderRadius:"50%"}:{}}),Object(Be.jsx)("span",{className:c?v.HeaderAuth.spanAuthClassName:v.HeaderAuth.spanNoAuthClassName,children:c?null===t||void 0===t?void 0:t.email:"Sign in"})]})}),c&&Object(Be.jsx)(qe,{onSignOut:function(e){e.preventDefault(),a(function(){var e=Object(k.a)(C.a.mark((function e(t,a,r){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.delete(O.Logout),localStorage.removeItem(ce),t(J());case 3:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}())}})]})})};var We=function(){return Object(Be.jsx)("div",{className:"header__left",children:Object(Be.jsx)(Ue.a,{className:"header__logo-link header__logo-link--active",to:"/",children:Object(Be.jsx)("img",{className:"header__logo",src:"img/logo.svg",alt:"6 cities logo",width:"81",height:"41"})})})};function Ge(e){var t=e.renderAuth;return Object(Be.jsx)("header",{className:"header",children:Object(Be.jsx)("div",{className:"container",children:Object(Be.jsxs)("div",{className:"header__wrapper",children:[Object(Be.jsx)(We,{}),t&&Object(Be.jsx)(Ve,{})]})})})}var Ze=Object(i.memo)(Ge);a(54);var Ye=function(){return Object(Be.jsx)("div",{className:"loader","data-testid":"loader",children:Object(Be.jsx)("div",{className:"lds-dual-ring"})})};var Je=function(e){var t=e.isLoad,a=e.children;return t&&a||Object(Be.jsx)(Ye,{})};var Ke=function(e){var t=e.cityName,a=e.selectedCity,r=e.onLocationClick;return Object(Be.jsx)("li",{className:"locations__item",children:Object(Be.jsx)("a",{className:"locations__item-link tabs__item ".concat(a===t?v.LocationsTab.itemClassName:""),href:"/",onClick:r,children:Object(Be.jsx)("span",{children:t})})})};function $e(e){var t=e.onMenuItemClick,a=e.selectedCity,r=function(e){e.preventDefault(),t(e.currentTarget.innerText)};return Object(Be.jsx)("section",{className:"locations container",children:Object(Be.jsx)("ul",{className:"locations__list tabs__list",children:b.map((function(e){return Object(Be.jsx)(Ke,{cityName:e,selectedCity:a,onLocationClick:r},e)}))})})}var Qe=Object(i.memo)($e),Xe=(a(55),a(21));var et=function(e,t){var a=t.location,r=Object(i.useState)(null),n=Object(d.a)(r,2),c=n[0],s=n[1];return Object(i.useEffect)((function(){if(null!==e.current&&null===c){var t=new Xe.Map(e.current,{center:{lat:a.latitude,lng:a.longitude},zoom:a.zoom}),r=new Xe.TileLayer("https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>'});t.addLayer(r),s(t)}else null===c||void 0===c||c.setView({lat:a.latitude,lng:a.longitude},a.zoom)}),[e,c,t,a]),c},tt=new Xe.Icon({iconUrl:f.Default,iconSize:[30,40],iconAnchor:[15,40]}),at=new Xe.Icon({iconUrl:f.Active,iconSize:[30,40],iconAnchor:[15,40]});var rt=function(e){var t=e.offers,a=e.selectedOfferId,r=e.currentOffer,n=r?r.city:t[0].city,c=Object(i.useRef)(null),s=et(c,n);return Object(i.useEffect)((function(){if(s){if(r)new Xe.Marker({lat:r.location.latitude,lng:r.location.longitude}).setIcon(at).addTo(s);t.forEach((function(e){new Xe.Marker({lat:e.location.latitude,lng:e.location.longitude}).setIcon(null!==a&&e.id===a?at:tt).addTo(s)}))}}),[s,t,n,a,r]),Object(Be.jsx)("div",{style:{height:"100%"},ref:c})};var nt=function(e){var t=e.onFavoriteButtonClick,a=e.isFavorite;return Object(Be.jsxs)("button",{className:"place-card__bookmark-button ".concat(a?v.CitiesPlaces.buttonClassName:""," button"),type:"button",onClick:t,children:[Object(Be.jsx)("svg",{className:"place-card__bookmark-icon",width:"18",height:"19",children:Object(Be.jsx)("use",{xlinkHref:"#icon-bookmark"})}),Object(Be.jsx)("span",{className:"visually-hidden",children:a?"In bookmarks":"To bookmarks"})]})};var ct=function(){return Object(Be.jsx)("div",{className:"place-card__mark",children:Object(Be.jsx)("span",{children:"Premium"})})};var st=function(e){var t=e.offer,a=e.onCardOver,n=e.onCardOut,c=e.customClasses,s=t.isPremium,i=t.isFavorite,o=t.price,l=t.type,u=t.title,d=t.rating,f=t.previewImage,b=t.id,p=c.cardClassName,O=c.wrapperClassName,m=Object(j.b)();return Object(Be.jsxs)("article",{className:"".concat(p," place-card"),onMouseEnter:function(){return a(b)},onMouseLeave:function(){return n()},"data-testid":"place-card",children:[s&&Object(Be.jsx)(ct,{}),Object(Be.jsx)("div",{className:"".concat(O," place-card__image-wrapper"),children:Object(Be.jsx)(Ue.a,{to:"".concat(r.Offer).concat(b),children:Object(Be.jsx)("img",{className:"place-card__image",src:f,width:"260",height:"200",alt:"Great Housing!","data-testid":"path-to-offer"})})}),Object(Be.jsxs)("div",{className:"place-card__info",children:[Object(Be.jsxs)("div",{className:"place-card__price-wrapper",children:[Object(Be.jsxs)("div",{className:"place-card__price",children:[Object(Be.jsxs)("b",{className:"place-card__price-value",children:["\u20ac",o]}),Object(Be.jsx)("span",{className:"place-card__price-text",children:"/\xa0night"})]}),Object(Be.jsx)(nt,{isFavorite:i,onFavoriteButtonClick:function(e){e.preventDefault(),m(se(b,+!i))}})]}),Object(Be.jsx)("div",{className:"place-card__rating rating",children:Object(Be.jsxs)("div",{className:"place-card__stars rating__stars",children:[Object(Be.jsx)("span",{style:{width:"".concat(be(d),"%")}}),Object(Be.jsx)("span",{className:"visually-hidden",children:"Rating"})]})}),Object(Be.jsx)("h2",{className:"place-card__name",children:Object(Be.jsx)(Ue.a,{to:"".concat(r.Offer).concat(b),"data-testid":"path-to-offer",children:u})}),Object(Be.jsx)("p",{className:"place-card__type",children:fe(l)})]})]})};var it=function(e){var t=e.offers,a=e.transferActiveOfferId,r=e.customClasses,n=r.listClassName,c=r.tabsClassName,s=Object(i.useCallback)((function(e){a&&a(e)}),[a]),o=Object(i.useCallback)((function(){a&&a(null)}),[a]);return Object(Be.jsx)("div",{className:"".concat(n," places__list ").concat(c),children:t.map((function(e){var t="".concat(e.city.name,"-").concat(e.id);return Object(Be.jsx)(st,{offer:e,onCardOver:s,onCardOut:o,customClasses:r},t)}))})};function ot(e){var t=e.currentSortingType,a=e.onSelectSorting,r=Object(i.useState)(!1),n=Object(d.a)(r,2),c=n[0],s=n[1];return Object(Be.jsxs)("form",{className:"places__sorting",action:"#",method:"get",onClick:function(){s((function(e){return!e}))},children:[Object(Be.jsx)("span",{className:"places__sorting-caption",children:"Sort by "}),Object(Be.jsxs)("span",{className:"places__sorting-type",tabIndex:0,children:[t,Object(Be.jsx)("svg",{className:"places__sorting-arrow",width:"7",height:"4",children:Object(Be.jsx)("use",{xlinkHref:"#icon-arrow-select"})})]}),Object(Be.jsx)("ul",{className:"places__options places__options--custom ".concat(c?v.PlacesSort.listClassName:""),children:Object.values(h).map((function(e){return Object(Be.jsx)("li",{className:"places__option ".concat(t===e?v.PlacesSort.itemClassName:""),tabIndex:0,onClick:function(e){return function(e){e.stopPropagation(),a(e.currentTarget.innerText),s((function(e){return!e}))}(e)},children:e},e)}))})]})}var lt=Object(i.memo)(ot);var ut=function(e){var t=e.selectedCity;return Object(Be.jsx)("section",{className:"cities__no-places",children:Object(Be.jsxs)("div",{className:"cities__status-wrapper tabs__content",children:[Object(Be.jsx)("b",{className:"cities__status",children:"No places to stay available"}),Object(Be.jsxs)("p",{className:"cities__status-description",children:["We could not find any property available at the moment in ",t]})]})})};var dt=function(){var e=Object(j.c)(Ee),t=Object(j.c)(Te),a=Object(j.c)(Ie),r=Object(j.c)(Me),n=Object(j.b)(),c=Object(i.useCallback)((function(){n(function(){var e=Object(k.a)(C.a.mark((function e(t,a,r){var n,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.get(O.Hotels);case 3:n=e.sent,c=n.data,t(P(ae(c))),t(E(m.Succeeded)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),t(E(m.Failed)),L.b.error(w);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a,r){return e.apply(this,arguments)}}())}),[n]);Object(i.useEffect)((function(){c()}),[c]);var s=Object(i.useState)(null),o=Object(d.a)(s,2),l=o[0],u=o[1];return Object(Be.jsxs)("div",{className:"page page--gray page--main",children:[Object(Be.jsx)(Ze,{renderAuth:!0}),Object(Be.jsx)(Je,{isLoad:r===m.Succeeded,children:Object(Be.jsxs)("main",{className:"page__main page__main--index ".concat(r!==m.Succeeded?v.MainScreen.mainClassName:""),children:[Object(Be.jsx)("h1",{className:"visually-hidden",children:"Cities"}),Object(Be.jsx)("div",{className:"tabs",children:Object(Be.jsx)(Qe,{onMenuItemClick:function(e){n(T(e))},selectedCity:t})}),Object(Be.jsx)("div",{className:"cities",children:Object(Be.jsxs)("div",{className:"cities__places-container ".concat(r!==m.Succeeded?v.MainScreen.divCitiesClassName:""," container"),children:[e.length?Object(Be.jsxs)("section",{className:"cities__places places",children:[Object(Be.jsx)("h2",{className:"visually-hidden",children:"Places"}),Object(Be.jsxs)("b",{className:"places__found",children:[e.length," place",e.length>1?"s":""," to stay in ",t]}),Object(Be.jsx)(lt,{onSelectSorting:function(e){n(I(e))},currentSortingType:a}),Object(Be.jsx)(Je,{isLoad:r===m.Succeeded,children:Object(Be.jsx)(it,{offers:e,transferActiveOfferId:function(e){u(e)},customClasses:v.CitiesPlaces})})]}):Object(Be.jsx)(ut,{selectedCity:t}),Object(Be.jsx)("div",{className:"cities__right-section",children:r===m.Succeeded&&Object(Be.jsx)("section",{className:"cities__map map",children:Object(Be.jsx)(rt,{offers:e,selectedOfferId:l})})})]})})]})})]})},jt=a(5);var ft=function(){var e=Object(j.c)(He)===n.Auth,t=Object(j.b)(),a=function(e){t(function(e){var t=e.login,a=e.password;return function(){var e=Object(k.a)(C.a.mark((function e(c,s,i){var o,l;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.post(O.Login,{email:t,password:a});case 3:o=e.sent,s=(l=o.data).token,localStorage.setItem(ce,s),c(Y(n.Auth)),c($(re(l))),c(K(r.Main)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),L.b.error(g);case 14:case"end":return e.stop()}var s}),e,null,[[0,11]])})));return function(t,a,r){return e.apply(this,arguments)}}()}(e))},c=Object(i.useRef)(null),s=Object(i.useRef)(null);return e?Object(Be.jsx)(jt.a,{to:r.Main}):Object(Be.jsxs)("div",{className:"page page--gray page--login",children:[Object(Be.jsx)(Ze,{renderAuth:!1}),Object(Be.jsx)("main",{className:"page__main page__main--login",children:Object(Be.jsxs)("div",{className:"page__login-container container",children:[Object(Be.jsxs)("section",{className:"login",children:[Object(Be.jsx)("h1",{className:"login__title",children:"Sign in"}),Object(Be.jsxs)("form",{className:"login__form form",action:"#",method:"post",onSubmit:function(e){e.preventDefault(),null!==c.current&&null!==s.current&&a({login:c.current.value,password:s.current.value})},children:[Object(Be.jsxs)("div",{className:"login__input-wrapper form__input-wrapper",children:[Object(Be.jsx)("label",{className:"visually-hidden",children:"E-mail"}),Object(Be.jsx)("input",{className:"login__input form__input",ref:c,type:"email",name:"email",placeholder:"Email",required:!0,onChange:function(e){var t;c.current&&(c.current.setCustomValidity((t=c.current.value,/^([A-Za-z0-9_\-.])+@([A-Za-z0-9_\-.])+\.([A-Za-z]{2,4})$/.test(t)?"":"Login must contain a valid email address")),c.current.reportValidity())},"data-testid":"login"})]}),Object(Be.jsxs)("div",{className:"login__input-wrapper form__input-wrapper",children:[Object(Be.jsx)("label",{className:"visually-hidden",children:"Password"}),Object(Be.jsx)("input",{className:"login__input form__input",ref:s,type:"password",name:"password",placeholder:"Password",required:!0,onChange:function(e){var t;s.current&&(s.current.setCustomValidity((t=s.current.value,/(?=.*\d)(?=.*[a-zA-Z])./.test(t)?"":"Password must contain at least 1 letter and 1 number.\n No spaces allowed")),s.current.reportValidity())},"data-testid":"password"})]}),Object(Be.jsx)("button",{className:"login__submit form__submit button",type:"submit",children:"Sign in"})]})]}),Object(Be.jsx)("section",{className:"locations locations--login locations--current",children:Object(Be.jsx)("div",{className:"locations__item",children:Object(Be.jsx)(Ue.a,{to:r.Main,className:"locations__item-link",onClick:function(e){var a;a=e.currentTarget.innerText,t(T(a))},children:Object(Be.jsx)("span",{children:me(b,1)})})})})]})})]})},bt=function(e){return e[F.favoriteOffers].favoriteOffers},pt=function(e){return e[F.favoriteOffers].favoriteOffersLoadingStatus},Ot=Object(Pe.a)(bt,(function(e){return Object(je.a)(new Set(e.map((function(e){return e.city.name})))).sort()}));var mt=function(){return Object(Be.jsxs)("section",{className:"favorites favorites--empty",children:[Object(Be.jsx)("h1",{className:"visually-hidden",children:"Favorites (empty)"}),Object(Be.jsxs)("div",{className:"favorites__status-wrapper",children:[Object(Be.jsx)("b",{className:"favorites__status",children:"Nothing yet saved."}),Object(Be.jsx)("p",{className:"favorites__status-description",children:"Save properties to narrow down search or plan your future trips."})]})]})};var vt=function(e){var t=e.favoriteOffer,a=t.price,n=t.type,c=t.title,s=t.rating,o=t.previewImage,l=t.id,u=t.isFavorite,d=Object(j.b)();return Object(i.useEffect)((function(){se(l,+!u)}),[l,u]),Object(Be.jsxs)("article",{className:"favorites__card place-card",children:[Object(Be.jsx)("div",{className:"favorites__image-wrapper place-card__image-wrapper",children:Object(Be.jsx)("a",{href:"/",children:Object(Be.jsx)("img",{className:"place-card__image",src:o,width:"150",height:"110",alt:"Great Housing!"})})}),Object(Be.jsxs)("div",{className:"favorites__card-info place-card__info",children:[Object(Be.jsxs)("div",{className:"place-card__price-wrapper",children:[Object(Be.jsxs)("div",{className:"place-card__price",children:[Object(Be.jsxs)("b",{className:"place-card__price-value",children:["\u20ac",a]}),Object(Be.jsx)("span",{className:"place-card__price-text",children:"/\xa0night"})]}),Object(Be.jsx)(nt,{isFavorite:u,onFavoriteButtonClick:function(e){e.preventDefault(),d(se(l,+!u))}})]}),Object(Be.jsx)("div",{className:"place-card__rating rating",children:Object(Be.jsxs)("div",{className:"place-card__stars rating__stars",children:[Object(Be.jsx)("span",{style:{width:"".concat(be(s),"%")}}),Object(Be.jsx)("span",{className:"visually-hidden",children:"Rating"})]})}),Object(Be.jsx)("h2",{className:"place-card__name",children:Object(Be.jsx)(Ue.a,{to:"".concat(r.Offer).concat(l),children:c})}),Object(Be.jsx)("p",{className:"place-card__type",children:fe(n)})]})]})};var ht=function(e){var t=e.locationOffers,a=Object(j.b)();return Object(Be.jsxs)("li",{className:"favorites__locations-items",children:[Object(Be.jsx)("div",{className:"favorites__locations locations locations--current",children:Object(Be.jsx)("div",{className:"locations__item",children:Object(Be.jsx)(Ue.a,{className:"locations__item-link",to:r.Main,onClick:function(e){var t;t=e.currentTarget.innerText,a(T(t))},children:Object(Be.jsx)("span",{children:t[0].city.name})})})}),Object(Be.jsx)("div",{className:"favorites__places",children:t.map((function(e){var t="".concat(e.id,"-").concat(e.city.name);return Object(Be.jsx)(vt,{favoriteOffer:e},t)}))})]})};var _t=function(e){var t=e.favoriteOffers,a=Object(j.c)(Ot);return Object(Be.jsxs)("section",{className:"favorites",children:[Object(Be.jsx)("h1",{className:"favorites__title",children:"Saved listing"}),Object(Be.jsx)("ul",{className:"favorites__list",children:a.map((function(e){return Object(Be.jsx)(ht,{locationOffers:Oe(t,e)},e)}))})]})};function gt(){return Object(Be.jsx)("footer",{className:"footer container",children:Object(Be.jsx)(Ue.a,{className:"footer__logo-link",to:"/",children:Object(Be.jsx)("img",{className:"footer__logo",src:"img/logo.svg",alt:"6 cities logo",width:"64",height:"33"})})})}var xt=Object(i.memo)(gt);var Nt=function(){var e=Object(j.c)(bt),t=Object(j.c)(pt),a=Object(j.b)(),r=Object(i.useCallback)((function(){a(function(){var e=Object(k.a)(C.a.mark((function e(t,a,r){var n,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.get(O.Favorite);case 3:n=e.sent,c=n.data,t(G(ae(c))),t(B(m.Succeeded)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t(B(m.Failed));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a,r){return e.apply(this,arguments)}}())}),[a]);return Object(i.useEffect)((function(){r()}),[r]),Object(Be.jsxs)("div",{className:"page",children:[Object(Be.jsx)(Ze,{renderAuth:!0}),Object(Be.jsx)(Je,{isLoad:t===m.Succeeded,children:Object(Be.jsx)("main",{className:"page__main page__main--favorites ".concat(0===e.length?v.FavoritesScreen.mainClassName:""),"data-testid":"favorites-screen",children:Object(Be.jsx)("div",{className:"page__favorites-container container",children:0===e.length?Object(Be.jsx)(mt,{}):Object(Be.jsx)(_t,{favoriteOffers:e})})})}),Object(Be.jsx)(xt,{})]})},yt=function(e){return e[F.reviews].offerReviewsLoadingStatus},wt=function(e){return e[F.reviews].reviewLoadingStatus},St=Object(Pe.a)((function(e){return e[F.reviews].offerReviews}),(function(e){return Object(je.a)(e).sort((function(e,t){return new Date(t.date).getTime()-new Date(e.date).getTime()})).slice(0,10)}));var Ct=function(e){var t=e.onRatingChange,a=e.rating,r=Object(j.c)(wt);return Object(Be.jsx)(Be.Fragment,{children:pe.map((function(e){return Object(Be.jsxs)(i.Fragment,{children:[Object(Be.jsx)("input",{className:"form__rating-input visually-hidden",name:"rating",value:e,id:"rating-".concat(e,"-star"),type:"radio",checked:e===a,onChange:t,disabled:r===m.Loading}),Object(Be.jsx)("label",{htmlFor:"rating-".concat(e,"-star"),className:"reviews__rating-label form__rating-label",title:s[e-1].toLowerCase(),children:Object(Be.jsx)("svg",{className:"form__star-image",width:"37",height:"33",children:Object(Be.jsx)("use",{xlinkHref:"#icon-star"})})})]},e)}))})},kt={comment:"",rating:0};var Lt=function(){var e=Object(j.c)(wt),t=e===m.Loading,a=Object(j.b)(),r=function(e,t){a(function(e,t){var a=t.comment,r=t.rating;return function(){var t=Object(k.a)(C.a.mark((function t(n,c,s){var i,o;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(z(m.Loading)),t.next=4,s.post("".concat(O.Reviews,"/").concat(e),{comment:a,rating:r});case 4:i=t.sent,o=i.data,n(D(ne(o))),n(z(m.Succeeded)),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),n(z(m.Failed)),L.b.error(y);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,a,r){return t.apply(this,arguments)}}()}(e,t)),a(ie(e))},n=Object(i.useState)(kt),c=Object(d.a)(n,2),s=c[0],o=c[1],l=Object(jt.g)().id;Object(i.useEffect)((function(){e===m.Succeeded&&o(kt)}),[e]);var u=s.comment,f=s.rating;return Object(Be.jsxs)("form",{className:"reviews__form form",action:"#",method:"post",onSubmit:function(e){e.preventDefault(),r(l,s)},children:[Object(Be.jsx)("label",{className:"reviews__label form__label",htmlFor:"review",children:"Your review"}),Object(Be.jsx)("div",{className:"reviews__rating-form form__rating",children:Object(Be.jsx)(Ct,{onRatingChange:function(e){o((function(t){return Object(Q.a)(Object(Q.a)({},t),{},{rating:+e.target.value})}))},rating:f})}),Object(Be.jsx)("textarea",{className:"reviews__textarea form__textarea",id:"review",name:"review",placeholder:"Tell how was your stay, what you like and what can be improved",value:u,onChange:function(e){o((function(t){return Object(Q.a)(Object(Q.a)({},t),{},{comment:e.target.value})}))},disabled:t}),Object(Be.jsxs)("div",{className:"reviews__button-wrapper",children:[Object(Be.jsxs)("p",{className:"reviews__help",children:["To submit review please make sure to set ",Object(Be.jsx)("span",{className:"reviews__star",children:"rating"})," and describe your stay with",u.length<p.Min?" at least ":" up to ",Object(Be.jsxs)("b",{className:"reviews__text-amount",children:[u.length<p.Min?" 50 ":" 300 "," characters"]}),".",u.length<p.Min&&u.length>p.Min-10&&"".concat(p.Min-u.length," characters are missing."),u.length>=p.Max&&"".concat(u.length-(p.Max-1)," characters are redundant.")]}),Object(Be.jsx)("button",{className:"reviews__submit form__submit button",type:"submit",disabled:he(f,u)||t,children:"Submit"})]})]})};var At=function(e){var t=e.review,a=t.comment,r=t.rating,n=t.date,c=t.user,s=c.name,i=c.avatarUrl,o=function(e){var t=new Date(e);return[t.toLocaleString("en-CA").slice(0,10),t.toLocaleString("en-US",{month:"long",year:"numeric"})]}(n),l=Object(d.a)(o,2),u=l[0],j=l[1];return Object(Be.jsxs)("li",{className:"reviews__item",children:[Object(Be.jsxs)("div",{className:"reviews__user user",children:[Object(Be.jsx)("div",{className:"reviews__avatar-wrapper user__avatar-wrapper",children:Object(Be.jsx)("img",{className:"reviews__avatar user__avatar",src:i,width:"54",height:"54",alt:"Reviews avatar"})}),Object(Be.jsx)("span",{className:"reviews__user-name",children:s})]}),Object(Be.jsxs)("div",{className:"reviews__info",children:[Object(Be.jsx)("div",{className:"reviews__rating rating",children:Object(Be.jsxs)("div",{className:"reviews__stars rating__stars",children:[Object(Be.jsx)("span",{style:{width:"".concat(be(r),"%")}}),Object(Be.jsx)("span",{className:"visually-hidden",children:"Rating"})]})}),Object(Be.jsx)("p",{className:"reviews__text",children:a}),Object(Be.jsx)("time",{className:"reviews__time",dateTime:u,children:j})]})]})};var Rt=function(){var e=Object(jt.g)(),t=Object(j.c)(St),a=Object(j.b)(),r=Object(i.useCallback)((function(t){a(ie(e.id))}),[a,e.id]);return Object(i.useEffect)((function(){r(e.id)}),[r,e.id]),Object(Be.jsxs)(Be.Fragment,{children:[Object(Be.jsxs)("h2",{className:"reviews__title",children:["Reviews \xb7 ",Object(Be.jsx)("span",{className:"reviews__amount",children:t.length})]}),Object(Be.jsx)("ul",{className:"reviews__list",children:t.map((function(e){return Object(Be.jsx)(At,{review:e},"".concat(e.user.name,"-").concat(e.id))}))})]})};var Ft=function(e){var t=e.goods;return Object(Be.jsxs)("div",{className:"property__inside",children:[Object(Be.jsx)("h2",{className:"property__inside-title",children:"What's inside"}),Object(Be.jsx)("ul",{className:"property__inside-list",children:t.map((function(e){return Object(Be.jsx)("li",{className:"property__inside-item",children:e},"".concat(e,"-1"))}))})]})};var Tt=function(e){var t=e.itemSource;return Object(Be.jsx)("div",{className:"property__image-wrapper",children:Object(Be.jsx)("img",{className:"property__image",src:t,alt:"Great Housing!"})})};var It=function(e){var t=e.galleryItems;return Object(Be.jsx)("div",{className:"property__gallery",children:t.map((function(e){return Object(Be.jsx)(Tt,{itemSource:e},e)}))})},Pt=function(e){return e[F.nearbyOffers].nearbyOffers},Mt=function(e){return e[F.nearbyOffers].nearbyOffersLoadingStatus};var Dt=function(e){var t=e.currentOffer,a=Object(jt.g)(),r=Object(j.c)(He),c=Object(j.c)(Pt),s=Object(j.c)(Mt),o=Object(j.c)(yt),l=Object(j.b)(),u=Object(i.useCallback)((function(e){l(function(e){return function(){var t=Object(k.a)(C.a.mark((function t(a,r,n){var c,s;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.get("".concat(O.Hotels,"/").concat(e).concat(O.Nearby));case 3:c=t.sent,s=c.data,a(V(ae(s))),a(W(m.Succeeded)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),a(W(m.Failed)),L.b.error(w);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,a,r){return t.apply(this,arguments)}}()}(e))}),[l]),d=Object(i.useCallback)((function(e){l(ie(e))}),[l]);Object(i.useEffect)((function(){u(a.id),d(a.id)}),[u,d,a.id]);var f=r===n.Auth,b=t.images,p=t.description,h=t.isPremium,_=t.isFavorite,g=t.title,x=t.rating,N=t.type,y=t.bedrooms,S=t.maxAdults,A=t.price,R=t.goods,F=t.host,T=F.avatarUrl,I=F.isPro,P=F.name,M=me(b,6);return Object(Be.jsxs)("main",{className:"page__main page__main--property","data-testid":"offer-container",children:[Object(Be.jsxs)("section",{className:"property",children:[Object(Be.jsx)("div",{className:"property__gallery-container container",children:Object(Be.jsx)(It,{galleryItems:M})}),Object(Be.jsx)("div",{className:"property__container container",children:Object(Be.jsxs)("div",{className:"property__wrapper",children:[h&&Object(Be.jsx)("div",{className:"property__mark",children:Object(Be.jsx)("span",{children:"Premium"})}),Object(Be.jsxs)("div",{className:"property__name-wrapper",children:[Object(Be.jsx)("h1",{className:"property__name",children:g}),Object(Be.jsxs)("button",{className:"property__bookmark-button ".concat((null===t||void 0===t?void 0:t.isFavorite)?v.CurrentOffer.buttonFavoriteClassName:""," button"),type:"button",onClick:function(e){e.preventDefault();var t=+!_;!function(e,t){l(se(e,t))}(+a.id,t)},children:[Object(Be.jsx)("svg",{className:"property__bookmark-icon",width:"31",height:"33",children:Object(Be.jsx)("use",{xlinkHref:"#icon-bookmark"})}),Object(Be.jsx)("span",{className:"visually-hidden",children:"".concat(_?"In ":"To ","bookmarks")})]})]}),Object(Be.jsxs)("div",{className:"property__rating rating",children:[Object(Be.jsxs)("div",{className:"property__stars rating__stars",children:[Object(Be.jsx)("span",{style:{width:"".concat(be(x),"%")}}),Object(Be.jsx)("span",{className:"visually-hidden",children:"Rating"})]}),Object(Be.jsx)("span",{className:"property__rating-value rating__value",children:x})]}),Object(Be.jsxs)("ul",{className:"property__features",children:[Object(Be.jsx)("li",{className:"property__feature property__feature--entire",children:N}),Object(Be.jsxs)("li",{className:"property__feature property__feature--bedrooms",children:[y," Bedrooms"]}),Object(Be.jsxs)("li",{className:"property__feature property__feature--adults",children:["Max ",S," adults"]})]}),Object(Be.jsxs)("div",{className:"property__price",children:[Object(Be.jsxs)("b",{className:"property__price-value",children:["\u20ac",A]}),Object(Be.jsx)("span",{className:"property__price-text",children:"\xa0night"})]}),Object(Be.jsx)(Ft,{goods:R}),Object(Be.jsxs)("div",{className:"property__host",children:[Object(Be.jsx)("h2",{className:"property__host-title",children:"Meet the host"}),Object(Be.jsxs)("div",{className:"property__host-user user",children:[Object(Be.jsx)("div",{className:"property__avatar-wrapper ".concat(I?v.CurrentOffer.divProClassName:""," user__avatar-wrapper"),children:Object(Be.jsx)("img",{className:"property__avatar user__avatar",src:T,width:"74",height:"74",alt:"Host avatar"})}),Object(Be.jsx)("span",{className:"property__user-name",children:P}),I&&Object(Be.jsx)("span",{className:"property__user-status",children:"Pro"})]}),Object(Be.jsx)("div",{className:"property__description",children:Object(Be.jsx)("p",{className:"property__text",children:p})})]}),Object(Be.jsxs)("section",{className:"property__reviews reviews",children:[Object(Be.jsx)(Je,{isLoad:o===m.Succeeded,children:Object(Be.jsx)(Rt,{})}),f&&Object(Be.jsx)(Lt,{})]})]})}),Object(Be.jsx)("section",{className:"property__map map",children:Object(Be.jsx)(Je,{isLoad:s===m.Succeeded,children:Object(Be.jsx)(rt,{offers:c,selectedOfferId:null,currentOffer:t})})})]}),Object(Be.jsx)("div",{className:"container",children:Object(Be.jsxs)("section",{className:"near-places places",children:[Object(Be.jsx)("h2",{className:"near-places__title",children:"Other places in the neighbourhood"}),Object(Be.jsx)(Je,{isLoad:s===m.Succeeded,children:Object(Be.jsx)(it,{offers:c,customClasses:v.NearPlaces})})]})})]})};a(56);var Et=function(){return Object(Be.jsxs)("div",{className:"page page--gray page--main",children:[Object(Be.jsx)(Ze,{renderAuth:!0}),Object(Be.jsx)("main",{className:"page__main",children:Object(Be.jsx)("div",{className:"container",children:Object(Be.jsxs)("section",{className:"not-found",children:[Object(Be.jsx)("h1",{className:"visually-hidden",children:"Page not found"}),Object(Be.jsxs)("div",{className:"not-found__status-wrapper",children:[Object(Be.jsxs)("div",{className:"not-found__status",children:[Object(Be.jsx)("b",{children:"404"}),Object(Be.jsx)("svg",{width:"28",height:"43",viewBox:"0 0 28 43",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(Be.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.62.914a1.166 1.166 0 0 1 2.278.504L15.33 40.086a1.166 1.166 0 1 1-2.277-.504L21.621.914z",fill:"#4481C3"})}),Object(Be.jsx)("span",{className:"not-found__status",children:"Page not found"})]}),Object(Be.jsx)("p",{className:"not-found__status-description",children:Object(Be.jsx)(Ue.a,{className:"not-found__link",to:r.Main,title:"Main Page",children:"Back to main page"})})]})]})})})]})},Ut=function(e){return e[F.currentOffer].currentOffer},Ht=function(e){return e[F.currentOffer].currentOfferLoadingStatus};var zt=function(){var e=Object(jt.g)(),t=Object(j.c)(He),a=Object(j.c)(Ut),c=Object(j.c)(Ht),s=Object(j.b)(),o=Object(i.useCallback)((function(t){s(function(e){return function(){var t=Object(k.a)(C.a.mark((function t(a,r,n){var c,s;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.get("".concat(O.Hotels,"/").concat(e));case 3:c=t.sent,s=c.data,a(M(te(s))),a(U(m.Succeeded)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),a(U(m.Failed)),L.b.error(w);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,a,r){return t.apply(this,arguments)}}()}(e.id))}),[s,e.id]);return Object(i.useEffect)((function(){o(e.id)}),[o,e.id]),Object(i.useEffect)((function(){t===n.NoAuth&&(jt.a,r.SignIn)}),[t]),c===m.Failed?Object(Be.jsx)(Et,{}):Object(Be.jsxs)("div",{className:"page",children:[Object(Be.jsx)(Ze,{renderAuth:!0}),Object(Be.jsx)(Je,{isLoad:c===m.Succeeded,children:Object(Be.jsx)(Dt,{currentOffer:a})})]})};var Bt=function(e){var t=e.exact,a=e.path,c=e.render,s=Object(j.c)(He);return Object(Be.jsx)(jt.b,{exact:t,path:a,render:function(e){return s===n.Auth?c(e):Object(Be.jsx)(jt.a,{to:r.SignIn})}})};var qt=function(){return Object(Be.jsxs)(jt.d,{children:[Object(Be.jsx)(jt.b,{exact:!0,path:r.Main,children:Object(Be.jsx)(dt,{})}),Object(Be.jsx)(jt.b,{exact:!0,path:r.SignIn,children:Object(Be.jsx)(ft,{})}),Object(Be.jsx)(Bt,{exact:!0,path:r.Favorites,render:function(){return Object(Be.jsx)(Nt,{})}}),Object(Be.jsx)(jt.b,{exact:!0,path:r.Room,children:Object(Be.jsx)(zt,{})}),Object(Be.jsx)(jt.b,{children:Object(Be.jsx)(Et,{})})]})},Vt=a(41),Wt=a.n(Vt),Gt=a(10),Zt=Object(Gt.a)(),Yt=function(e){return function(e){return function(t){return t.type===_.RedirectToRoute&&Zt.push(t.payload),e(t)}}},Jt=(a(76),function(e){var t=Wt.a.create({baseURL:"https://8.react.pages.academy/six-cities",timeout:5e3});return t.interceptors.response.use((function(e){return e}),(function(t){var a=t.response;return(null===a||void 0===a?void 0:a.status)===c.Unauthorized&&e(),Promise.reject(t)})),t.interceptors.request.use((function(e){var t=function(){var e=localStorage.getItem(ce);return null!==e&&void 0!==e?e:""}();return t&&(e.headers["x-token"]=t),e})),t}((function(){return Kt.dispatch(Y(n.NoAuth))}))),Kt=Object(A.a)({reducer:Fe,middleware:function(e){return e({thunk:{extraArgument:Jt}}).concat(Yt)}});Kt.dispatch(function(){var e=Object(k.a)(C.a.mark((function e(t,a,r){var c,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.get(O.Login);case 3:c=e.sent,s=c.data,t(Y(n.Auth)),t($(re(s))),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),t(Y(n.NoAuth)),L.b.info(x);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a,r){return e.apply(this,arguments)}}()),u.a.render(Object(Be.jsx)(o.a.StrictMode,{children:Object(Be.jsx)(j.a,{store:Kt,children:Object(Be.jsxs)(jt.c,{history:Zt,children:[Object(Be.jsx)(L.a,{}),Object(Be.jsx)(qt,{})]})})}),document.getElementById("root"))}},[[77,1,2]]]);
//# sourceMappingURL=main.8901ec45.chunk.js.map